import streamlit as st
import pandas as pd
import random
from io import StringIO

# ごみ分別データ（タブ区切り）
data_text = """品目\t分別区分
アイロン\t缶以外のカナモノ
空き缶（飲料・缶詰）\t空き缶
空きビン（飲料・調味料等）\tビン・ペットボトル
アルミホイル\t燃やせるごみ
一斗缶\t缶以外のカナモノ
一升ビン\t一升ビン・ビールビン
衣類\t布類
植木鉢（陶器・プラスチック）\t埋立ごみ
ウイスキーのビン\tビン・ペットボトル
運動靴\t燃やせるごみ
エアコン\t家電4品目
液晶テレビ\t家電4品目
オイルヒーター\t缶以外のカナモノ
オムツ\t燃やせるごみ
貝殻\t燃やせるごみ
鏡\t埋立ごみ
家具（木製・金属製）\t粗大ごみ
ガスコンロ\t缶以外のカナモノ
ガステーブル\t缶以外のカナモノ
カセットコンロ\t缶以外のカナモノ
カセットテープ\t燃やせるごみ
カセットボンベ\t空き缶
乾電池\t有害物
キーボード（楽器）\t缶以外のカナモノ
急須\t埋立ごみ
牛乳パック\t紙類
金庫（手提げ）\t缶以外のカナモノ
蛍光灯\t有害物
携帯電話\t缶以外のカナモノ
ゲーム機\t缶以外のカナモノ
化粧品のビン\t埋立ごみ
ゴム手袋\t燃やせるごみ
ゴルフボール\t燃やせるごみ
座布団\t粗大ごみ
サングラス\t埋立ごみ
CD・DVD\t燃やせるごみ
食器（陶器・ガラス）\t埋立ごみ
食器（プラスチック）\t燃やせるごみ
食器洗い機\t缶以外のカナモノ
新聞紙\t紙類
水銀体温計\t有害物
スーツケース\t粗大ごみ
スプレー缶\t空き缶
生花\t燃やせるごみ
洗濯機\t家電4品目
掃除機\t缶以外のカナモノ
体温計（デジタル）\t缶以外のカナモノ
体重計\t缶以外のカナモノ
タオル\t布類
竹\t燃やせるごみ
卵の殻\t燃やせるごみ
ダンボール\t紙類
茶碗\t埋立ごみ
調味料のビン\tビン・ペットボトル
机\t粗大ごみ
土\t埋立ごみ
電気カーペット\t粗大ごみ
電気コード\t缶以外のカナモノ
電子レンジ\t缶以外のカナモノ
電池（乾電池）\t有害物
電話機\t缶以外のカナモノ
テレビ\t家電4品目
トースター\t缶以外のカナモノ
ナイフ\t缶以外のカナモノ
鍋\t缶以外のカナモノ
生ごみ\t生ごみ
人形（プラスチック）\t燃やせるごみ
人形（陶器）\t埋立ごみ
ぬいぐるみ\t燃やせるごみ
ネクタイ\t布類
パソコン\tパソコンリサイクル
バケツ（プラスチック）\t燃やせるごみ
白熱電球\t埋立ごみ
発泡スチロール\t発泡スチロール
花瓶\t埋立ごみ
歯ブラシ\t燃やせるごみ
ビールビン\t一升ビン・ビールビン
ビデオテープ\t燃やせるごみ
ファンヒーター\t缶以外のカナモノ
布団\t粗大ごみ
フライパン\t缶以外のカナモノ
プラスチック容器\t燃やせるごみ
ペットボトル\tビン・ペットボトル
ペットボトルキャップ\t燃やせるごみ
ベッド\t粗大ごみ
ヘルメット\t燃やせるごみ
ボールペン\t燃やせるごみ
ホットカーペット\t粗大ごみ
本・雑誌\t紙類
マットレス\t粗大ごみ
魔法瓶\t埋立ごみ
水枕\t燃やせるごみ
虫眼鏡\t埋立ごみ
やかん\t缶以外のカナモノ
湯たんぽ\t缶以外のカナモノ
ライター（使い捨て）\t燃やせるごみ
ラップ\t燃やせるごみ
冷蔵庫・冷凍庫\t家電4品目
ワイングラス\t埋立ごみ
ワインのビン\tビン・ペットボトル
"""

# CSVデータをDataFrameに変換
df = pd.read_csv(StringIO(data_text), sep="\t")

st.title("♻️ 日田市 ごみ分別クイズ")

# ランダムに1問出題
question = df.sample(1).iloc[0]
item = question["品目"]
correct = question["分別区分"]

# 正解 + ランダムな選択肢3つ
choices = df["分別区分"].drop_duplicates().tolist()
choices.remove(correct)
random_choices = random.sample(choices, 3)
options = random_choices + [correct]
random.shuffle(options)

st.write(f"この品目『**{item}**』は、どのごみに分別されるでしょう？")

user_choice = st.radio("選択肢", options)

if st.button("回答する"):
    if user_choice == correct:
        st.success("✅ 正解です！")
    else:
        st.error(f"❌ 不正解。正解は「{correct}」です。")

